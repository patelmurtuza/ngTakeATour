{"version":3,"file":"ngx-take-atour.umd.js.map","sources":["ng://ngx-take-atour/lib/ngx-take-atour.service.ts","ng://ngx-take-atour/lib/ngx-take-atour.component.ts","ng://ngx-take-atour/lib/ngx-take-atour.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxTakeATourService {\n\n  public closeBtnMain;\n  public countPopOverArr: any = [];\n  constructor() { }\n}\n","import { Component, OnInit, Input, ElementRef, ViewChild, HostBinding, Renderer2 } from '@angular/core';\nimport { NgxTakeATourService } from './ngx-take-atour.service';\n\n@Component({\n  selector: 'NgxTT-NgxTakeATour',\n  template: `\n  <small class=\"k-icon k-i-information\" attr.data-id=\"{{id}}\" (click)=\"openPopover($event)\"></small>\n  <div class=\"popover\" role=\"tooltip\" attr.id=\"{{id}}\">\n      <h3 class=\"popover-title\">\n          <strong>{{helpContent.title}}</strong>\n          <i class=\"glyphicon glyphicon-remove pull-right\" (click)=\"closePopOver($event)\"></i>\n      </h3>\n      <div class=\"popover-content\">\n          <div class=\"\" [@slideToggle]=\"state\">\n              <video controls autoplay #videoPlayer>\n                  <source src=\"\" type=\"video/mp4\"/>\n              </video>\n          </div>\n          <ul>\n              <li *ngFor=\"let itemContent of helpContent.content\">{{itemContent}}</li>\n          </ul>\n      </div>\n      <div class=\"text-center\">\n          <button class=\"btn btn-primary btn-link\" (click)=\"toggleState()\">\n              <i [ngClass]=\"state =='active'?'glyphicon glyphicon-menu-up':'glyphicon glyphicon-facetime-video'\"></i>\n          </button>\n      </div>\n  </div>\n  `,\n  styles: ['ngx-take-atour.component.css']\n})\nexport class NgxTakeATourComponent implements OnInit {\n  public element: any;\n  public mainPopOver: any;\n  public currentPopOver: any;\n  public state = 'inactive';\n\n  @Input() id: string;\n  @Input() toggleHelp: boolean;\n  @Input() positioning: any = {};\n  @Input() helpContent: any = {};\n\n  @ViewChild('videoPlayer') videoplayer: ElementRef;\n  @HostBinding('style.display') display: string;\n\n  constructor(private el: ElementRef, private renderer: Renderer2, private globalsettings: NgxTakeATourService) {\n    this.element = el.nativeElement;\n  }\n\n  ngOnInit() {\n    this.mainPopOver = this.element.querySelector(\".popover\");\n    document.body.appendChild(this.mainPopOver);\n    this.renderer.setStyle(this.element, this.positioning.align, this.positioning.value + \"px\");\n  }\n\n  ngDoCheck() {\n    if (this.toggleHelp)\n      this.display = \"block\";\n    else\n      this.display = \"none\";\n  }\n\n  openPopover(e) {\n    let styles: any = getComputedStyle(this.mainPopOver);\n    this.currentPopOver = e.target.getAttribute(\"data-id\");\n    this.renderer.setStyle(this.mainPopOver, \"display\", \"block\");\n    this.renderer.setStyle(this.mainPopOver, \"max-width\", \"500px\");\n    let getStyleMW = parseInt(styles.maxWidth, 10);\n    this.renderer.setStyle(this.mainPopOver, \"left\", (e.clientX + 15) - (getStyleMW / 2) + \"px\");\n    this.renderer.setStyle(this.mainPopOver, \"top\", e.clientY + \"px\");\n    this.renderer.addClass(this.mainPopOver, \"tempPopover\");\n    let getStyleLeftValue = parseInt(styles.left, 10);\n\n    if (getStyleLeftValue <= 0) {\n      this.renderer.setStyle(this.mainPopOver, \"left\", (e.clientX) + \"px\");\n    }\n    if (this.globalsettings.countPopOverArr.length > 0) {\n      if (this.globalsettings.countPopOverArr.find(i => i == this.mainPopOver.id) == undefined) this.globalsettings.countPopOverArr.push(this.mainPopOver.id);\n    }\n    else\n      this.globalsettings.countPopOverArr.push(this.mainPopOver.id);\n    this.enableCloseAll();\n  }\n\n  closePopOver(e?: any) {\n\n    this.renderer.removeAttribute(this.mainPopOver, \"style\");\n    this.renderer.removeClass(this.mainPopOver, \"tempPopover\");\n    let index = this.globalsettings.countPopOverArr.indexOf(this.mainPopOver.id);\n    if (index > -1) this.globalsettings.countPopOverArr.splice(index, 1);\n    if (this.globalsettings.countPopOverArr.length == 0) {\n      if (this.globalsettings.closeBtnMain) {\n        this.globalsettings.closeBtnMain.remove();\n        this.globalsettings.closeBtnMain = null;\n      }\n    }\n    this.state = 'inactive';\n  }\n\n  enableCloseAll() {\n    let totalPopover = document.querySelectorAll(\".tempPopover\");\n    let closeBtn, closeIcon, closeTextWrap, closeText;\n\n    if (this.globalsettings.countPopOverArr.length > 2) {\n      if (!this.globalsettings.closeBtnMain) {\n        closeBtn = this.renderer.createElement(\"div\");\n        closeIcon = this.renderer.createElement(\"i\");\n        closeTextWrap = this.renderer.createElement(\"span\");\n        closeText = this.renderer.createText(\"Close all walkthrough window\");\n        this.renderer.addClass(closeBtn, \"close-popover\");\n        this.renderer.addClass(closeIcon, \"glyphicon\");\n        this.renderer.addClass(closeIcon, \"glyphicon-remove\");\n        this.renderer.appendChild(document.body, closeBtn);\n        this.renderer.appendChild(closeBtn, closeTextWrap);\n        this.renderer.appendChild(closeBtn, closeIcon);\n        this.renderer.appendChild(closeTextWrap, closeText);\n        this.globalsettings.closeBtnMain = document.querySelector(\".close-popover\");\n        this.enableCloseBtn();\n        setTimeout(() => {\n          this.renderer.addClass(closeBtn, \"visible\");\n        }, 100);\n      }\n    }\n  }\n\n  enableCloseBtn() {\n    let popOver = document.querySelectorAll(\".popover\");\n\n    this.globalsettings.closeBtnMain.addEventListener(\"click\", (event: Event) => {\n      for (let i = 0; i < popOver.length; i++) {\n        if (popOver[i].hasAttribute(\"style\")) {\n          popOver[i].removeAttribute(\"style\");\n          popOver[i].classList.remove(\"tempPopover\");\n        }\n      }\n      this.globalsettings.closeBtnMain.remove();\n      this.globalsettings.closeBtnMain = null;\n      this.globalsettings.countPopOverArr = [];\n      this.state = 'inactive';\n    });\n  }\n\n  toggleState() {\n    this.state = this.state === 'active' ? 'inactive' : 'active';\n    this.renderer.setAttribute(this.videoplayer.nativeElement, \"src\", this.helpContent.videoUrl);\n    if (this.state === 'active')\n      this.videoplayer.nativeElement.play();\n  }\n\n  ngOnDestroy() {\n    this.closePopOver();\n    this.globalsettings.countPopOverArr = [];\n    this.globalsettings.closeBtnMain = null;\n    this.state = 'inactive';\n    document.body.removeChild(this.mainPopOver);\n  }\n\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from \"@angular/core\";\nimport { NgxTakeATourComponent } from './ngx-take-atour.component';\n\n@NgModule({\n  imports: [\n    CommonModule \n  ],\n  declarations: [NgxTakeATourComponent],\n  exports: [NgxTakeATourComponent]\n})\nexport class NgxTakeATourModule { }\n"],"names":["Injectable","Component","ElementRef","Renderer2","Input","ViewChild","HostBinding","NgModule","CommonModule"],"mappings":"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"}
