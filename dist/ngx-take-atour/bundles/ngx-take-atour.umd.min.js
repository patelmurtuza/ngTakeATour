!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core")):"function"==typeof define&&define.amd?define("ngx-take-atour",["exports","@angular/common","@angular/core"],t):t(e["ngx-take-atour"]={},e.ng.common,e.ng.core)}(this,function(e,t,n){"use strict";var o=function(){function e(){this.countPopOverArr=[]}return e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=n.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),i=function(){function e(e,t,n){this.el=e,this.renderer=t,this.globalsettings=n,this.state="inactive",this.positioning={},this.helpContent={},this.element=e.nativeElement}return e.prototype.ngOnInit=function(){this.mainPopOver=this.element.querySelector(".popover"),document.body.appendChild(this.mainPopOver),this.renderer.setStyle(this.element,this.positioning.align,this.positioning.value+"px")},e.prototype.ngDoCheck=function(){this.toggleHelp?this.display="block":this.display="none"},e.prototype.openPopover=function(e){var t=this,n=getComputedStyle(this.mainPopOver);this.currentPopOver=e.target.getAttribute("data-id"),this.renderer.setStyle(this.mainPopOver,"display","block"),this.renderer.setStyle(this.mainPopOver,"max-width","500px");var o=parseInt(n.maxWidth,10);this.renderer.setStyle(this.mainPopOver,"left",e.clientX+15-o/2+"px"),this.renderer.setStyle(this.mainPopOver,"top",e.clientY+"px"),this.renderer.addClass(this.mainPopOver,"tempPopover"),parseInt(n.left,10)<=0&&this.renderer.setStyle(this.mainPopOver,"left",e.clientX+"px"),0<this.globalsettings.countPopOverArr.length?this.globalsettings.countPopOverArr.find(function(e){return e==t.mainPopOver.id})==undefined&&this.globalsettings.countPopOverArr.push(this.mainPopOver.id):this.globalsettings.countPopOverArr.push(this.mainPopOver.id),this.enableCloseAll()},e.prototype.closePopOver=function(e){this.renderer.removeAttribute(this.mainPopOver,"style"),this.renderer.removeClass(this.mainPopOver,"tempPopover");var t=this.globalsettings.countPopOverArr.indexOf(this.mainPopOver.id);-1<t&&this.globalsettings.countPopOverArr.splice(t,1),0==this.globalsettings.countPopOverArr.length&&this.globalsettings.closeBtnMain&&(this.globalsettings.closeBtnMain.remove(),this.globalsettings.closeBtnMain=null),this.state="inactive"},e.prototype.enableCloseAll=function(){var e,t,n,o,i=this;document.querySelectorAll(".tempPopover");2<this.globalsettings.countPopOverArr.length&&(this.globalsettings.closeBtnMain||(e=this.renderer.createElement("div"),t=this.renderer.createElement("i"),n=this.renderer.createElement("span"),o=this.renderer.createText("Close all walkthrough window"),this.renderer.addClass(e,"close-popover"),this.renderer.addClass(t,"glyphicon"),this.renderer.addClass(t,"glyphicon-remove"),this.renderer.appendChild(document.body,e),this.renderer.appendChild(e,n),this.renderer.appendChild(e,t),this.renderer.appendChild(n,o),this.globalsettings.closeBtnMain=document.querySelector(".close-popover"),this.enableCloseBtn(),setTimeout(function(){i.renderer.addClass(e,"visible")},100)))},e.prototype.enableCloseBtn=function(){var n=this,o=document.querySelectorAll(".popover");this.globalsettings.closeBtnMain.addEventListener("click",function(e){for(var t=0;t<o.length;t++)o[t].hasAttribute("style")&&(o[t].removeAttribute("style"),o[t].classList.remove("tempPopover"));n.globalsettings.closeBtnMain.remove(),n.globalsettings.closeBtnMain=null,n.globalsettings.countPopOverArr=[],n.state="inactive"})},e.prototype.toggleState=function(){this.state="active"===this.state?"inactive":"active",this.renderer.setAttribute(this.videoplayer.nativeElement,"src",this.helpContent.videoUrl),"active"===this.state&&this.videoplayer.nativeElement.play()},e.prototype.ngOnDestroy=function(){this.closePopOver(),this.globalsettings.countPopOverArr=[],this.globalsettings.closeBtnMain=null,this.state="inactive",document.body.removeChild(this.mainPopOver)},e.decorators=[{type:n.Component,args:[{selector:"NgxTT-NgxTakeATour",template:'\n  <small class="k-icon k-i-information" attr.data-id="{{id}}" (click)="openPopover($event)"></small>\n  <div class="popover" role="tooltip" attr.id="{{id}}">\n      <h3 class="popover-title">\n          <strong>{{helpContent.title}}</strong>\n          <i class="glyphicon glyphicon-remove pull-right" (click)="closePopOver($event)"></i>\n      </h3>\n      <div class="popover-content">\n          <div class="" [@slideToggle]="state">\n              <video controls autoplay #videoPlayer>\n                  <source src="" type="video/mp4"/>\n              </video>\n          </div>\n          <ul>\n              <li *ngFor="let itemContent of helpContent.content">{{itemContent}}</li>\n          </ul>\n      </div>\n      <div class="text-center">\n          <button class="btn btn-primary btn-link" (click)="toggleState()">\n              <i [ngClass]="state ==\'active\'?\'glyphicon glyphicon-menu-up\':\'glyphicon glyphicon-facetime-video\'"></i>\n          </button>\n      </div>\n  </div>\n  ',styles:["ngx-take-atour.component.css"]}]}],e.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2},{type:o}]},e.propDecorators={id:[{type:n.Input}],toggleHelp:[{type:n.Input}],positioning:[{type:n.Input}],helpContent:[{type:n.Input}],videoplayer:[{type:n.ViewChild,args:["videoPlayer"]}],display:[{type:n.HostBinding,args:["style.display"]}]},e}(),r=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule],declarations:[i],exports:[i]}]}],e}();e.NgxTakeATourService=o,e.NgxTakeATourComponent=i,e.NgxTakeATourModule=r,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-take-atour.umd.min.js.map