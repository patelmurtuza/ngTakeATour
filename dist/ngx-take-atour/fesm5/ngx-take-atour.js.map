{"version":3,"file":"ngx-take-atour.js.map","sources":["ng://ngx-take-atour/lib/ngx-take-atour.service.ts","ng://ngx-take-atour/lib/ngx-take-atour.component.ts","ng://ngx-take-atour/lib/ngx-take-atour.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxTakeATourService {\n\n  public closeBtnMain;\n  public countPopOverArr: any = [];\n  constructor() { }\n}\n","import { Component, OnInit, Input, ElementRef, ViewChild, HostBinding, Renderer2 } from '@angular/core';\nimport { NgxTakeATourService } from './ngx-take-atour.service';\n\n@Component({\n  selector: 'NgxTT-NgxTakeATour',\n  template: `\n  <small class=\"k-icon k-i-information\" attr.data-id=\"{{id}}\" (click)=\"openPopover($event)\"></small>\n  <div class=\"popover\" role=\"tooltip\" attr.id=\"{{id}}\">\n      <h3 class=\"popover-title\">\n          <strong>{{helpContent.title}}</strong>\n          <i class=\"glyphicon glyphicon-remove pull-right\" (click)=\"closePopOver($event)\"></i>\n      </h3>\n      <div class=\"popover-content\">\n          <div class=\"\" [@slideToggle]=\"state\">\n              <video controls autoplay #videoPlayer>\n                  <source src=\"\" type=\"video/mp4\"/>\n              </video>\n          </div>\n          <ul>\n              <li *ngFor=\"let itemContent of helpContent.content\">{{itemContent}}</li>\n          </ul>\n      </div>\n      <div class=\"text-center\">\n          <button class=\"btn btn-primary btn-link\" (click)=\"toggleState()\">\n              <i [ngClass]=\"state =='active'?'glyphicon glyphicon-menu-up':'glyphicon glyphicon-facetime-video'\"></i>\n          </button>\n      </div>\n  </div>\n  `,\n  styles: ['ngx-take-atour.component.css']\n})\nexport class NgxTakeATourComponent implements OnInit {\n  public element: any;\n  public mainPopOver: any;\n  public currentPopOver: any;\n  public state = 'inactive';\n\n  @Input() id: string;\n  @Input() toggleHelp: boolean;\n  @Input() positioning: any = {};\n  @Input() helpContent: any = {};\n\n  @ViewChild('videoPlayer') videoplayer: ElementRef;\n  @HostBinding('style.display') display: string;\n\n  constructor(private el: ElementRef, private renderer: Renderer2, private globalsettings: NgxTakeATourService) {\n    this.element = el.nativeElement;\n  }\n\n  ngOnInit() {\n    this.mainPopOver = this.element.querySelector(\".popover\");\n    document.body.appendChild(this.mainPopOver);\n    this.renderer.setStyle(this.element, this.positioning.align, this.positioning.value + \"px\");\n  }\n\n  ngDoCheck() {\n    if (this.toggleHelp)\n      this.display = \"block\";\n    else\n      this.display = \"none\";\n  }\n\n  openPopover(e) {\n    let styles: any = getComputedStyle(this.mainPopOver);\n    this.currentPopOver = e.target.getAttribute(\"data-id\");\n    this.renderer.setStyle(this.mainPopOver, \"display\", \"block\");\n    this.renderer.setStyle(this.mainPopOver, \"max-width\", \"500px\");\n    let getStyleMW = parseInt(styles.maxWidth, 10);\n    this.renderer.setStyle(this.mainPopOver, \"left\", (e.clientX + 15) - (getStyleMW / 2) + \"px\");\n    this.renderer.setStyle(this.mainPopOver, \"top\", e.clientY + \"px\");\n    this.renderer.addClass(this.mainPopOver, \"tempPopover\");\n    let getStyleLeftValue = parseInt(styles.left, 10);\n\n    if (getStyleLeftValue <= 0) {\n      this.renderer.setStyle(this.mainPopOver, \"left\", (e.clientX) + \"px\");\n    }\n    if (this.globalsettings.countPopOverArr.length > 0) {\n      if (this.globalsettings.countPopOverArr.find(i => i == this.mainPopOver.id) == undefined) this.globalsettings.countPopOverArr.push(this.mainPopOver.id);\n    }\n    else\n      this.globalsettings.countPopOverArr.push(this.mainPopOver.id);\n    this.enableCloseAll();\n  }\n\n  closePopOver(e?: any) {\n\n    this.renderer.removeAttribute(this.mainPopOver, \"style\");\n    this.renderer.removeClass(this.mainPopOver, \"tempPopover\");\n    let index = this.globalsettings.countPopOverArr.indexOf(this.mainPopOver.id);\n    if (index > -1) this.globalsettings.countPopOverArr.splice(index, 1);\n    if (this.globalsettings.countPopOverArr.length == 0) {\n      if (this.globalsettings.closeBtnMain) {\n        this.globalsettings.closeBtnMain.remove();\n        this.globalsettings.closeBtnMain = null;\n      }\n    }\n    this.state = 'inactive';\n  }\n\n  enableCloseAll() {\n    let totalPopover = document.querySelectorAll(\".tempPopover\");\n    let closeBtn, closeIcon, closeTextWrap, closeText;\n\n    if (this.globalsettings.countPopOverArr.length > 2) {\n      if (!this.globalsettings.closeBtnMain) {\n        closeBtn = this.renderer.createElement(\"div\");\n        closeIcon = this.renderer.createElement(\"i\");\n        closeTextWrap = this.renderer.createElement(\"span\");\n        closeText = this.renderer.createText(\"Close all walkthrough window\");\n        this.renderer.addClass(closeBtn, \"close-popover\");\n        this.renderer.addClass(closeIcon, \"glyphicon\");\n        this.renderer.addClass(closeIcon, \"glyphicon-remove\");\n        this.renderer.appendChild(document.body, closeBtn);\n        this.renderer.appendChild(closeBtn, closeTextWrap);\n        this.renderer.appendChild(closeBtn, closeIcon);\n        this.renderer.appendChild(closeTextWrap, closeText);\n        this.globalsettings.closeBtnMain = document.querySelector(\".close-popover\");\n        this.enableCloseBtn();\n        setTimeout(() => {\n          this.renderer.addClass(closeBtn, \"visible\");\n        }, 100);\n      }\n    }\n  }\n\n  enableCloseBtn() {\n    let popOver = document.querySelectorAll(\".popover\");\n\n    this.globalsettings.closeBtnMain.addEventListener(\"click\", (event: Event) => {\n      for (let i = 0; i < popOver.length; i++) {\n        if (popOver[i].hasAttribute(\"style\")) {\n          popOver[i].removeAttribute(\"style\");\n          popOver[i].classList.remove(\"tempPopover\");\n        }\n      }\n      this.globalsettings.closeBtnMain.remove();\n      this.globalsettings.closeBtnMain = null;\n      this.globalsettings.countPopOverArr = [];\n      this.state = 'inactive';\n    });\n  }\n\n  toggleState() {\n    this.state = this.state === 'active' ? 'inactive' : 'active';\n    this.renderer.setAttribute(this.videoplayer.nativeElement, \"src\", this.helpContent.videoUrl);\n    if (this.state === 'active')\n      this.videoplayer.nativeElement.play();\n  }\n\n  ngOnDestroy() {\n    this.closePopOver();\n    this.globalsettings.countPopOverArr = [];\n    this.globalsettings.closeBtnMain = null;\n    this.state = 'inactive';\n    document.body.removeChild(this.mainPopOver);\n  }\n\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from \"@angular/core\";\nimport { NgxTakeATourComponent } from './ngx-take-atour.component';\n\n@NgModule({\n  imports: [\n    CommonModule \n  ],\n  declarations: [NgxTakeATourComponent],\n  exports: [NgxTakeATourComponent]\n})\nexport class NgxTakeATourModule { }\n"],"names":[],"mappings":"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"}
